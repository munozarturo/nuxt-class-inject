// @ts-check

(() => {
  const w = window;
  const de = document.documentElement;
  const ls = window.localStorage;

  const classNames =
    (ls && ls.getItem && ls.getItem("<%= options.storageKey %>")) || [];
  classNames.map((className) => addClassName(className));

  w["<%= options.globalName %>"] = {
    addClassName,
    removeClassName,
  };

  /** @param {string} value */
  function addClassName(value) {
    const className = "<%= options.classPrefix %>" + value;

    if (de.classList) {
      de.classList.add(className);
    } else {
      de.className += " " + className;
    }
  }

  /** @param {string} value */
  function removeClassName(value) {
    const className = "<%= options.classPrefix %>" + value;

    if (de.classList) {
      de.classList.remove(className);
    } else {
      de.className = de.className.replace(new RegExp(className, "g"), "");
    }
  }
})();
